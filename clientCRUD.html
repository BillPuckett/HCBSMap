<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>AASK HCBS Client Search</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
    <script type="text/javascript" src="js/gmaps/gmaps.js"></script>
    <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/1.3.0/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="styles/examples.css">


    <script type="text/javascript">
        Parse.initialize("LZ2tB5MBWI5vlyfSVGGWdBJUq8NJznafCU3jJwrV", "OolOrXs9MnHSZf86X4yQ0ZLEXfflpczQCRnANbIS");
        var map;
        var ClientGeolocation = Parse.Object.extend("ClientGeolocation");
        var clientGeolocation = new ClientGeolocation;

        $(document).ready(function(){

            $('#geocode_clients').submit(function(e) {
                e.preventDefault();
                GMaps.geocode({
                    address: $('#address').val().trim(),
                    callback: function (results, status) {
                        if (status == 'OK') {
                            var latlng = results[0].geometry.location;

                            clientGeolocation.save({
                                lat: latlng.lat(),
                                lng: latlng.lng()
                            }, {
                                success: function(clientGeolocation){
                                    alert("yay! it worked");
                                },
                                error: function(clientGeolocation, error) {
                                    alert("boo! it borked "+error);
                                }

                            });
                        }
                    }
                });
            });
        });

    </script>
    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="home">

<h1>HCBS Client Search</h1>
<form method="post" id="geocode_clients">
    <label for="address">Enter Clients Address:</label>
    <div class="input">
        <input type="text" id="address" name="address" />
        <input type="submit" class="btn" value="Search"/>
    </div>
</form>
<div id="map" class="large"></div>
</body>
</html>